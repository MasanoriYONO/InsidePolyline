http://inside-polyline.appspot.com/
で公開しているソースです。